<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
    <script type="module" src="js/save.js"></script>
    <title>Goal Tracker</title>
    <style>
        /* Flatpickr Styles */
        .flatpickr-calendar {
            background-color: #ffffff;
            border: 1px solid #ccc;
            border-radius: 10px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            z-index: 9999;
            font-size: 16px;
        }

        .flatpickr-day {
            padding: 10px;
            cursor: pointer;
            border-radius: 50%;
            margin: 2px;
            transition: background-color 0.3s;
        }

        .flatpickr-day:hover {
            background-color: #f0f0f0;
        }

        .flatpickr-day.selected {
            background-color: #007bff;
            color: #ffffff;
        }

        .flatpickr-day.today {
            background-color: #e9ecef;
            font-weight: bold;
        }

        .flatpickr-month {
            background-color: #007bff;
            color: #ffffff;
            padding: 10px;
            border-radius: 10px;
        }

        /* Goal Tracker Styles */
        .goal-tracker-container {
            max-width: 500px;
            margin: 40px auto;
            padding: 30px;
            background-color: #f9f9f9;
            border-radius: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        input[type="text"],
        textarea,
        .flatpickr-input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ccc;
            border-radius: 10px;
            margin-bottom: 15px;
            box-sizing: border-box;
        }

        .oval-btn {
            background-color: #007bff;
            color: white;
            border-radius: 25px;
            border: none;
            padding: 12px 25px;
            cursor: pointer;
            transition: background-color 0.3s;
            font-size: 16px;
        }

        .oval-btn:hover {
            background-color: #0056b3;
        }

        #goal-list {
            margin-top: 20px;
        }

        .goal-progress {
            background-color: #e9ecef;
            border-radius: 10px;
            height: 10px;
            margin-top: 10px;
        }

        .goal-progress-bar {
            background-color: #007bff;
            height: 100%;
            border-radius: 10px;
        }

        h2 {
            font-size: 24px;
            margin-bottom: 20px;
        }

        h3 {
            font-size: 20px;
            margin-top: 20px;
        }

        ul {
            list-style-type: none;
            padding: 0;
        }

        li {
            margin: 5px 0;
            font-size: 16px;
        }
    </style>
</head>
<body>

<div class="goal-tracker-container">
    <h2>Goal Tracker</h2>

    <!-- Goal Input Fields -->
    <input type="text" id="goal-name" placeholder="Enter your goal..." required />
    <input type="text" id="goal-target" placeholder="Enter total tasks or target value..." required />
    <input type="text" id="goal-current" placeholder="Enter completed tasks or current value..." required />

    <!-- Date Selection -->
    <label for="start-date">Start Date:</label>
    <input type="text" id="start-date" placeholder="Select start date" class="flatpickr-input" required />

    <label for="deadline">Deadline:</label>
    <input type="text" id="deadline" placeholder="Select deadline" class="flatpickr-input" required />

    <!-- Progress Bar -->
    <div class="goal-progress">
        <div id="goal-progress-bar" class="goal-progress-bar" style="width: 0%;"></div>
    </div>

    <!-- Buttons -->
    <button id="update-progress" class="oval-btn">Update Progress</button>
    <button id="delete-goal" class="oval-btn">Delete</button>

    <!-- Goal List -->
    <h3>Your Goals:</h3>
    <ul id="goal-list"></ul>

    <!-- Progress Notes -->
    <label for="progress-notes">Progress Notes:</label>
    <textarea id="progress-notes" placeholder="Enter progress notes..."></textarea>
</div>

<script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
<script>
    // Initialize Flatpickr for date selection
    flatpickr("#start-date", { dateFormat: "Y-m-d" });
    flatpickr("#deadline", { dateFormat: "Y-m-d" });

    // Delete button functionality
    document.getElementById("delete-goal").addEventListener("click", function() {
        const progressBar = document.getElementById("goal-progress-bar");
        progressBar.style.width = '0%'; // Reset progress bar

        // Clear input fields
        document.getElementById("goal-name").value = "";
        document.getElementById("goal-target").value = "";
        document.getElementById("goal-current").value = "";

        // Clear goal list
        const goalList = document.getElementById("goal-list");
        goalList.innerHTML = "";
    });

    // Update progress based on input values
    document.getElementById("update-progress").addEventListener("click", function() {
        const goalName = document.getElementById("goal-name").value;
        const targetValue = parseFloat(document.getElementById("goal-target").value);
        const currentValue = parseFloat(document.getElementById("goal-current").value);
        const progressNotes = document.getElementById("progress-notes").value;

        // Validate input values
        if (!isNaN(targetValue) && !isNaN(currentValue) && targetValue > 0) {
            const progressPercentage = (currentValue / targetValue) * 100;
            const progressBar = document.getElementById("goal-progress-bar");
            progressBar.style.width = `${Math.min(progressPercentage, 100)}%`; // Limit to 100%

            // Update goal list with current status
            const goalList = document.getElementById("goal-list");
            const listItem = document.createElement("li");
            listItem.textContent = `${goalName} - ${currentValue} / ${targetValue} (${Math.round(progressPercentage)}%) - Notes: ${progressNotes}`;
            goalList.appendChild(listItem);

            // Clear input fields
            document.getElementById("goal-current").value = "";
            document.getElementById("goal-target").value = "";
            document.getElementById("goal-name").value = "";
            document.getElementById("progress-notes").value = "";
        } else {
            alert("Please enter valid target and current values.");
        }
    });
</script>

</body>
</html>

