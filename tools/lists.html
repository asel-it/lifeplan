<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>My Lists</title>
    <script type="module" src="js/save.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            background-color: #f4f7fc;
            margin: 0;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .lists-widget, .items-widget {
            padding: 20px;
            border-radius: 10px;
            background-color: #ffffff;
            width: 100%;
            max-width: 650px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            margin-top: 20px;
        }

        h2 {
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 15px;
            text-align: center;
        }

        input[type="text"] {
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 25px;
            width: 100%;
            margin-bottom: 15px;
            font-size: 16px;
            box-sizing: border-box;
            background-color: #fafafa;
            transition: border-color 0.3s ease;
        }

        input[type="text"]:focus {
            border-color: #87cefa;
            outline: none;
        }

        .list-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
            padding: 10px;
            background-color: #f7faff;
            border-radius: 8px;
            box-shadow: 0 2px 6px rgba(0, 0, 0, 0.1);
        }

        .list-item span {
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }

        .list-button {
            background-color: #00bfff;
            color: white;
            border: none;
            border-radius: 25px;
            padding: 8px 15px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s ease;
        }

        .list-button:hover {
            background-color: #0099cc;
        }

        .list-button:active {
            background-color: #0077b3;
        }

        .list-button:focus {
            outline: none;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        td, th {
            padding: 12px;
            text-align: center;
            font-size: 14px;
            border: 1px solid #ddd;
        }

        th {
            background-color: #f2f8ff;
        }

        .item-button {
            background-color: #87cefa;
            color: white;
            padding: 8px 15px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 12px;
            transition: background-color 0.3s ease;
        }

        .item-button:hover {
            background-color: #00bfff;
        }

        .item-button:active {
            background-color: #0099cc;
        }

        .item-button:focus {
            outline: none;
        }

        #addListButton, #addItemButton, #backButton {
            padding: 12px 18px;
            border-radius: 25px;
            background-color: #00bfff;
            color: white;
            border: none;
            cursor: pointer;
            font-size: 16px;
            width: 100%;
            max-width: 200px;
            margin: 10px 0;
            transition: background-color 0.3s ease;
        }

        #addListButton:hover, #addItemButton:hover, #backButton:hover {
            background-color: #0099cc;
        }

        #addListButton:active, #addItemButton:active, #backButton:active {
            background-color: #0077b3;
        }

        #addListButton:focus, #addItemButton:focus, #backButton:focus {
            outline: none;
        }

        @media (max-width: 600px) {
            body {
                padding: 10px;
            }

            h2 {
                font-size: 20px;
            }

            .list-item {
                flex-direction: column;
                align-items: flex-start;
            }

            input[type="text"] {
                font-size: 14px;
            }

            .item-button {
                font-size: 10px;
            }

            #addListButton, #addItemButton, #backButton {
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="lists-widget">
        <h2>My Lists</h2>
        <input type="text" id="listInput" placeholder="Add a new list" />
        <button id="addListButton">Add List</button>
        <div id="listsContainer"></div> <!-- Container for all lists -->
    </div>

    <div class="items-widget" style="display: none;">
        <h2 id="currentListTitle"></h2>
        <table>
            <thead>
                <tr>
                    <th>No</th>
                    <th style="width: 60%;">Item</th>
                    <th style="width: 10%;">Edit</th>
                    <th style="width: 10%;">Delete</th>
                    <th style="width: 10%;">Mark</th>
                </tr>
            </thead>
            <tbody id="itemsContainer"></tbody>
        </table>
        <input type="text" id="itemInput" placeholder="Add an item" />
        <button id="addItemButton">Add Item</button>
        <button id="backButton">Back to Lists</button>
    </div>

    <script>
        let listCounter = 1; // Counter for list numbering
        let currentListId = null; // Identifier for the current list
        const lists = {}; // Object to store lists and their items

        document.getElementById('addListButton').addEventListener('click', function () {
            const listInput = document.getElementById('listInput');
            const listValue = listInput.value.trim();
            if (listValue) {
                const listId = `list_${listCounter++}`;
                lists[listId] = { name: listValue, items: [] };

                const listElement = document.createElement('div');
                listElement.className = 'list-item';
                listElement.innerHTML = `
                    <span>${listValue}</span>
                    <button class="list-button" onclick="openList('${listId}')">Open</button>
                    <button class="list-button" onclick="editList('${listId}')">Edit</button>
                    <button class="list-button" onclick="deleteList('${listId}', this)">Delete</button>
                `;
                document.getElementById('listsContainer').appendChild(listElement);
                listInput.value = '';
            }
        });

        function openList(listId) {
            currentListId = listId;
            document.querySelector('.lists-widget').style.display = 'none';
            document.querySelector('.items-widget').style.display = 'block';
            document.getElementById('currentListTitle').textContent = lists[currentListId].name;
            updateItemsTable();
        }

        function updateItemsTable() {
            const itemsContainer = document.getElementById('itemsContainer');
            itemsContainer.innerHTML = '';

            lists[currentListId].items.forEach((item, index) => {
                const newRow = document.createElement('tr');
                newRow.innerHTML = `
                    <td>${index + 1}</td>
                    <td ${item.checked ? 'style="text-decoration: line-through;"' : ''}>${item.text}</td>
                    <td>
                        <button class="item-button" onclick="editItem(${index})">Edit</button>
                    </td>
                    <td>
                        <button class="item-button" onclick="deleteItem(${index})">Delete</button>
                    </td>
                    <td>
                        <button class="item-button" onclick="toggleCheck(${index})">${item.checked ? 'Unmark' : 'Mark'}</button>
                    </td>
                `;
                itemsContainer.appendChild(newRow);
            });
        }

        function editList(listId) {
            const newName = prompt('Edit list name:', lists[listId].name);
            if (newName) {
                lists[listId].name = newName;
                updateListDisplay();
            }
        }

        function updateListDisplay() {
            const listsContainer = document.getElementById('listsContainer');
            listsContainer.innerHTML = '';
            for (const listId in lists) {
                const listElement = document.createElement('div');
                listElement.className = 'list-item';
                listElement.innerHTML = `
                    <span>${lists[listId].name}</span>
                    <button class="list-button" onclick="openList('${listId}')">Open</button>
                    <button class="list-button" onclick="editList('${listId}')">Edit</button>
                    <button class="list-button" onclick="deleteList('${listId}', this)">Delete</button>
                `;
                listsContainer.appendChild(listElement);
            }
        }

        function deleteList(listId, button) {
            if (confirm('Are you sure you want to delete this list?')) {
                delete lists[listId];
                button.parentElement.remove();
            }
        }

        document.getElementById('addItemButton').addEventListener('click', function () {
            const itemInput = document.getElementById('itemInput');
            const itemValue = itemInput.value.trim();
            if (itemValue) {
                lists[currentListId].items.push({ text: itemValue, checked: false });
                itemInput.value = '';
                updateItemsTable();
            }
        });

        function editItem(index) {
            const newItemText = prompt('Edit item text:', lists[currentListId].items[index].text);
            if (newItemText) {
                lists[currentListId].items[index].text = newItemText;
                updateItemsTable();
            }
        }

        function deleteItem(index) {
            if (confirm('Are you sure you want to delete this item?')) {
                lists[currentListId].items.splice(index, 1);
                updateItemsTable();
            }
        }

        function toggleCheck(index) {
            lists[currentListId].items[index].checked = !lists[currentListId].items[index].checked;
            updateItemsTable();
        }

        document.getElementById('backButton').addEventListener('click', function () {
            document.querySelector('.lists-widget').style.display = 'block';
            document.querySelector('.items-widget').style.display = 'none';
        });
    </script>
</body>
</html>

